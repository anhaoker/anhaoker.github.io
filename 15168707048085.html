<!DOCTYPE html>
<html>

<head>
    <title>
         DBA学习考试题 - An Honglei ’s Blog 
    </title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="从心开始">

    <link rel="stylesheet" type="text/css" href="asset/yue.css">
    <link rel="stylesheet" type="text/css" href="asset/main.css">
    <link rel="stylesheet" type="text/css" href="asset/tomorrow.css">

    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="An Honglei ’s Blog">

    <script src="asset/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>

<body>
    <header class="yue site-header">
        <div class="wrapper">
            <a class="site-title" href="index.html">An Honglei ’s Blog</a>
            <nav class="site-nav">
                <a href="#" class="menu-icon">
                    
                    <svg viewBox="0 0 18 15">
                        <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"
                        />
                        <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"
                        />
                        <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"
                        />
                    </svg>

                </a>
                <div class="trigger">
                    
                        <a class="page-link" href="index.html">Home</a>
                    
                        <a class="page-link" href="archives.html">Archives</a>
                    
                        <a class="page-link" href="/docker">Docker</a>
                    
                </div>
            </nav>
        </div>
    </header>
</body>

</html> <script async defer src="//hypothes.is/embed.js"></script>
<div class="page-content yue">
    <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
            <header class="post-header">
                <h1 class="post-title" itemprop="name headline">DBA学习考试题</h1>
                <div class="post-description">
                    
                        <p>北斗云谷DBA学习考试题<br/>
MySQL优化试卷</p>

<p>姓名：        _ 日期：________  成绩：    ____   共6页</p>

<p>一、简单题，每题5分，共12道题，共60分<br/>
1、MySQL数据库优化要解决什么问题？</p>

<pre><code>保证SQL结果的正确
增加SQL的效率
节省系统资源
增强用户体验
</code></pre>

<p>2、如何开启mysql的慢日志，以及MySQL慢日志参数的功能是什么？</p>

<pre><code>slow_query_log    ：是否开启慢查询日志，1表示开启，0表示关闭。
slow-query-log-file： MySQL数据库慢查询日志存储路径。可以不设置该参数，系统则会默认给一个缺省的文件host_name-slow.log
long_query_time ：慢查询阈值，当查询时间多于设定的阈值时，记录日志。
log_queries_not_using_indexes：未使用索引的查询也被记录到慢查询日志中（可选项）。
log_output：日志存储方式。log_output=&#39;FILE&#39;表示将日志存入文件，默认值是&#39;FILE&#39;。log_output=&#39;TABLE&#39;表示将日志存入数据库，这样日志信息就会被写入到mysql.slow_log表中。MySQL数据&lt;br&gt;库支持同时两种日志存储方式，配置的时候以逗号隔开即可，如：log_output=&#39;FILE,TABLE&#39;。日志记录到系统的专用日志表中，要比记录到文件耗费更多的系统资源，因此对于需要启用慢查询日志，又需&lt;br&gt;要能够获得更高的系统性能，那么建议优先记录到文件。
</code></pre>

<p>3、请列出至少3种MySQL慢日志分析工具，以及使用工具分析slow.log？</p>

<pre><code>mysqldumpslow
mysqldumpslow –a –t 10 slow.log

pt-query-digest
pt-query-digest  --since=12h  slow.log &gt; slow_report2.log

mysqlsla
mysqlsla -lt slow --sort t_sum --top 10 /data/mysql/3306/logs/slow.log &gt; /tmp/select.log
</code></pre>

<p>4、MySQL中myisam与innodb的区别，至少5点，已经适合的场景？</p>

<pre><code>可移植性、备份及恢复
MyISAM：数据是以文件的形式存储，直接拷贝
InnoDB：免费的方案可以是拷贝数据文件、备份 binlog，或者用 mysqldump

事务支持
MyISAM：不提供事务支持。 InnoDB：提供事务支持事务， 

外键
MyISAM：不支持 InnoDB：支持

表锁差异
MyISAM：只支持表级锁，
InnoDB：支持事务和行级锁， 

全文索引
MyISAM：支持 FULLTEXT类型的全文索引 InnoDB：不支持FULLTEXT类型的全文索引，但可以使用sphinx插件支持全文索引
</code></pre>

<p>5、MySQL有哪些日志需要开启，以及日志对应的功能。</p>

<pre><code>•   错误日志
    o   log_error = /mydata/data/mysql.test.com.err #指定错误日志的位置，默认是在数据目录下，这个位置mysql用户必须有写权限
    o   log_warning = {0|1} #默认开启，服务器运行中的警告日志也会记录在错误日志中

•   查询日志
    o   log = {ON|OFF} #是否启用查询日志，该指令在mysq5.6中已废弃
    o   general_log = {ON|OFF} #启动或关闭查询日志，默认是关闭的
    o   general_log_file = /mydata/data/mysql.log #指定查询日志的位置，默认在数据目录下
    o   log_output = {TABLE|FILE|NONE} #指定存放查询日志的位置，可以放在文件中，也可以放在数据库的表中，放在表中比放在文件中更容易查看
    
    •   慢查询日志
    o   slow_query_log  = {ON | OFF} #是否开启慢慢查询日志，默认是关闭的 
    o   slow_query_log_file = /mydata/data/mysql-slow.log #慢查询日志的存放位置，默认在数据目录下
    o   log_query_time = 10 #定义默认的时长，默认时长为10秒
    o   log_query_not_using_indexes = {ON|OFF} #设定是否将没有使用索引的查询操作记录到慢查询日志 
    o   log_output = {TABLE|FILE|NONE} #定义一般查询日志和慢查询日志的保存方式，可以是TABLE、FILE、NONE，也可以是TABLE及FILE的组合(用逗号隔开)，默认为FILE。如果组合中出现了NONE，那么其它设定都将失效，同时，无论是否启用日志功能，也不会记录任何相关的日志信息

•   二进制日志
    log_bin = mysql-bin #指定binlog的位置，默认在数据目录下
    binlog-format = {ROW|STATEMENT|MIXED} #指定二进制日志的类型，默认为MIXED。如果设定了二进制日志的格式，却没有启用二进制日志，则MySQL启动时会产生警告日志信息并记录于错误日志中。 
    sync_binlog = 10 #设定多久同步一次二进制日志至磁盘文件中，0表示不同步，任何正数值都表示对二进制每多少次写操作之后同步一次。当autocommit的值为1时，每条语句的执行都会引起二进制日志同步，否则，每个事务的提交会引起二进制日志同步  
    max_binlog_cache_size = {4096 .. 18446744073709547520} #二进定日志缓存空间大小，5.5.9及以后的版本仅应用于事务缓存，其上限由max_binlog_stmt_cache_size决定。  
    max_binlog_stmt_cache_size = {4096 .. 18446744073709547520} #二进定日志缓存空间大小，5.5.9及以后的版本仅应用于事务缓存  
    expire_log_days = {0..99} #设定二进制日志的过期天数，超出此天数的二进制日志文件将被自动删除。默认为0，表示不启用过期自动删除功能。如果启用此功能，自动删除工作通常发生在MySQL启动时或FLUSH日志时

•   中继日志
    relay-log = file_name #指定中继日志的位置和名字，默认为host_name-relay-bin。也可以使用绝对路径，以指定非数据目录来存储中继日志  
    relay-log-index = file_name #指定中继日志的名字的索引文件的位置和名字，默认为数据目录中的host_name-relay-bin.index
    relay-log-info-file = file_name #设定中继服务用于记录中继信息的文件，默认为数据目录中的relay-log.info
    relay_log_purge = {ON|OFF} #设定对不再需要的中继日志是否自动进行清理。默认值为ON
    relay_log_space_limit = 0 #设定用于存储所有中继日志文件的可用空间大小。默认为0，表示不限定。最大值取决于系统平台位数
    max_relay_log_size = {4096..1073741824} #设定从服务器上中继日志的体积上限，到达此限度时其会自动进行中继日志滚动。此参数值为0时，mysqld将使用max_binlog_size参数同时为二进制日志和中继日志设定日志文件体积上限

•   事务日志

    innodb_data_home_dir = /mydata/data  #InnoDB所有共享表空间数据文件的目录路径，默认在数据目录下
    innodb_data_file_path = ibdata1:1024M  #指定InnoDB的各个数据文件及其大小，文件多于一个时彼此间用分号隔开 
    innodb_data_file_path = ibdata2:50M:autoextend  #定义数据大小的增长方式
    innodb_log_group_home_dir = /mydata/data #设定InnoDB重要日志文件的存储目录。在缺省使用InnoDB日志相关的所有变量时，其默认会在数据目录中创建两个大小为5MB的名为ib_logfile0和ib_logfile1的日志文件
    innodb_log_files_in_group = {2 .. 100} #设定日志组中日志文件的个数。InnoDB以循环的方式使用这些日志文件。默认值为2
    innodb_log_file_size = {108576 .. 4294967295} #设定日志组中每个日志文件的大小，单位是字节，默认值是5MB。较为明智的取值范围是从1MB到缓存池体积的1/n，其中n表示日志组中日志文件的个数。日志文件越大，在缓存池中需要执行的检查点刷写操作就越少，这意味着所需的I/O操作也就越少，然而这也会导致较慢的故障恢复速度
    innodb_log_buffer_size = {262144 .. 4294967295} #设定InnoDB用于辅助完成日志文件写操作的日志缓冲区大小，单位是字节，默认为8MB。较大的事务可以借助于更大的日志缓冲区来避免在事务完成之前将日志缓冲区的数据写入日志文件，以减少I/O操作进而提升系统性能。因此，在有着较大事务的应用场景中，建议为此变量设定一个更大的值



•   滚动日志
    mysql&gt; FLUSH LOGS;


</code></pre>

<p>6、MySQL优化方法有哪些？这些优化方法，成本由低到高是什么顺序？</p>

<p>7、drop,delete与truncate的区别</p>

<p>8、列出常用的硬盘Raid模式，以单盘300G，列出各个Raid模式的最低磁盘要求以及对应的使用空间？</p>

<p>9、IO密集型使用场景和CPU密集型使用场景分别是？</p>

<p>10、生产环境的MySQL采用哪种方式安装最优，为什么？</p>

<p>11、Innodb引擎下，常用的优化参数有哪些，以及列出参数对应的功能？</p>

<p>12、innodb_flush_log_at_trx_commit和sync_binlog如何配置性能最好，如何配置性能最安全？</p>

<p>二、问答题，每题10分，共4道题，一共40分<br/>
1、从哪些方面可以获取数据库需要优化的信息，请详细说明？</p>

<p>2、什么样的字段不适合创建索引？</p>

<p>3、MySQL在程序和架构方面，可以做哪些优化？</p>

<p>4、SQL类军规要掌握哪些？</p>

                    
                </div>
                <p class="post-meta">
                    <time class="post-time" datetime="2018-01-25T16:58:24+08:00"itemprop="datePublished">Created by Tisoga at 2018/1/25</time>
                </p>
            </header>
            <div class="post-content" itemprop="articleBody">
                <p>北斗云谷DBA学习考试题<br/>
MySQL优化试卷</p>

<p>姓名：        _ 日期：________  成绩：    ____   共6页</p>

<p>一、简单题，每题5分，共12道题，共60分<br/>
1、MySQL数据库优化要解决什么问题？</p>

<pre><code>保证SQL结果的正确
增加SQL的效率
节省系统资源
增强用户体验
</code></pre>

<p>2、如何开启mysql的慢日志，以及MySQL慢日志参数的功能是什么？</p>

<pre><code>slow_query_log    ：是否开启慢查询日志，1表示开启，0表示关闭。
slow-query-log-file： MySQL数据库慢查询日志存储路径。可以不设置该参数，系统则会默认给一个缺省的文件host_name-slow.log
long_query_time ：慢查询阈值，当查询时间多于设定的阈值时，记录日志。
log_queries_not_using_indexes：未使用索引的查询也被记录到慢查询日志中（可选项）。
log_output：日志存储方式。log_output=&#39;FILE&#39;表示将日志存入文件，默认值是&#39;FILE&#39;。log_output=&#39;TABLE&#39;表示将日志存入数据库，这样日志信息就会被写入到mysql.slow_log表中。MySQL数据&lt;br&gt;库支持同时两种日志存储方式，配置的时候以逗号隔开即可，如：log_output=&#39;FILE,TABLE&#39;。日志记录到系统的专用日志表中，要比记录到文件耗费更多的系统资源，因此对于需要启用慢查询日志，又需&lt;br&gt;要能够获得更高的系统性能，那么建议优先记录到文件。
</code></pre>

<p>3、请列出至少3种MySQL慢日志分析工具，以及使用工具分析slow.log？</p>

<pre><code>mysqldumpslow
mysqldumpslow –a –t 10 slow.log

pt-query-digest
pt-query-digest  --since=12h  slow.log &gt; slow_report2.log

mysqlsla
mysqlsla -lt slow --sort t_sum --top 10 /data/mysql/3306/logs/slow.log &gt; /tmp/select.log
</code></pre>

<p>4、MySQL中myisam与innodb的区别，至少5点，已经适合的场景？</p>

<pre><code>可移植性、备份及恢复
MyISAM：数据是以文件的形式存储，直接拷贝
InnoDB：免费的方案可以是拷贝数据文件、备份 binlog，或者用 mysqldump

事务支持
MyISAM：不提供事务支持。 InnoDB：提供事务支持事务， 

外键
MyISAM：不支持 InnoDB：支持

表锁差异
MyISAM：只支持表级锁，
InnoDB：支持事务和行级锁， 

全文索引
MyISAM：支持 FULLTEXT类型的全文索引 InnoDB：不支持FULLTEXT类型的全文索引，但可以使用sphinx插件支持全文索引
</code></pre>

<p>5、MySQL有哪些日志需要开启，以及日志对应的功能。</p>

<pre><code>•   错误日志
    o   log_error = /mydata/data/mysql.test.com.err #指定错误日志的位置，默认是在数据目录下，这个位置mysql用户必须有写权限
    o   log_warning = {0|1} #默认开启，服务器运行中的警告日志也会记录在错误日志中

•   查询日志
    o   log = {ON|OFF} #是否启用查询日志，该指令在mysq5.6中已废弃
    o   general_log = {ON|OFF} #启动或关闭查询日志，默认是关闭的
    o   general_log_file = /mydata/data/mysql.log #指定查询日志的位置，默认在数据目录下
    o   log_output = {TABLE|FILE|NONE} #指定存放查询日志的位置，可以放在文件中，也可以放在数据库的表中，放在表中比放在文件中更容易查看
    
    •   慢查询日志
    o   slow_query_log  = {ON | OFF} #是否开启慢慢查询日志，默认是关闭的 
    o   slow_query_log_file = /mydata/data/mysql-slow.log #慢查询日志的存放位置，默认在数据目录下
    o   log_query_time = 10 #定义默认的时长，默认时长为10秒
    o   log_query_not_using_indexes = {ON|OFF} #设定是否将没有使用索引的查询操作记录到慢查询日志 
    o   log_output = {TABLE|FILE|NONE} #定义一般查询日志和慢查询日志的保存方式，可以是TABLE、FILE、NONE，也可以是TABLE及FILE的组合(用逗号隔开)，默认为FILE。如果组合中出现了NONE，那么其它设定都将失效，同时，无论是否启用日志功能，也不会记录任何相关的日志信息

•   二进制日志
    log_bin = mysql-bin #指定binlog的位置，默认在数据目录下
    binlog-format = {ROW|STATEMENT|MIXED} #指定二进制日志的类型，默认为MIXED。如果设定了二进制日志的格式，却没有启用二进制日志，则MySQL启动时会产生警告日志信息并记录于错误日志中。 
    sync_binlog = 10 #设定多久同步一次二进制日志至磁盘文件中，0表示不同步，任何正数值都表示对二进制每多少次写操作之后同步一次。当autocommit的值为1时，每条语句的执行都会引起二进制日志同步，否则，每个事务的提交会引起二进制日志同步  
    max_binlog_cache_size = {4096 .. 18446744073709547520} #二进定日志缓存空间大小，5.5.9及以后的版本仅应用于事务缓存，其上限由max_binlog_stmt_cache_size决定。  
    max_binlog_stmt_cache_size = {4096 .. 18446744073709547520} #二进定日志缓存空间大小，5.5.9及以后的版本仅应用于事务缓存  
    expire_log_days = {0..99} #设定二进制日志的过期天数，超出此天数的二进制日志文件将被自动删除。默认为0，表示不启用过期自动删除功能。如果启用此功能，自动删除工作通常发生在MySQL启动时或FLUSH日志时

•   中继日志
    relay-log = file_name #指定中继日志的位置和名字，默认为host_name-relay-bin。也可以使用绝对路径，以指定非数据目录来存储中继日志  
    relay-log-index = file_name #指定中继日志的名字的索引文件的位置和名字，默认为数据目录中的host_name-relay-bin.index
    relay-log-info-file = file_name #设定中继服务用于记录中继信息的文件，默认为数据目录中的relay-log.info
    relay_log_purge = {ON|OFF} #设定对不再需要的中继日志是否自动进行清理。默认值为ON
    relay_log_space_limit = 0 #设定用于存储所有中继日志文件的可用空间大小。默认为0，表示不限定。最大值取决于系统平台位数
    max_relay_log_size = {4096..1073741824} #设定从服务器上中继日志的体积上限，到达此限度时其会自动进行中继日志滚动。此参数值为0时，mysqld将使用max_binlog_size参数同时为二进制日志和中继日志设定日志文件体积上限

•   事务日志

    innodb_data_home_dir = /mydata/data  #InnoDB所有共享表空间数据文件的目录路径，默认在数据目录下
    innodb_data_file_path = ibdata1:1024M  #指定InnoDB的各个数据文件及其大小，文件多于一个时彼此间用分号隔开 
    innodb_data_file_path = ibdata2:50M:autoextend  #定义数据大小的增长方式
    innodb_log_group_home_dir = /mydata/data #设定InnoDB重要日志文件的存储目录。在缺省使用InnoDB日志相关的所有变量时，其默认会在数据目录中创建两个大小为5MB的名为ib_logfile0和ib_logfile1的日志文件
    innodb_log_files_in_group = {2 .. 100} #设定日志组中日志文件的个数。InnoDB以循环的方式使用这些日志文件。默认值为2
    innodb_log_file_size = {108576 .. 4294967295} #设定日志组中每个日志文件的大小，单位是字节，默认值是5MB。较为明智的取值范围是从1MB到缓存池体积的1/n，其中n表示日志组中日志文件的个数。日志文件越大，在缓存池中需要执行的检查点刷写操作就越少，这意味着所需的I/O操作也就越少，然而这也会导致较慢的故障恢复速度
    innodb_log_buffer_size = {262144 .. 4294967295} #设定InnoDB用于辅助完成日志文件写操作的日志缓冲区大小，单位是字节，默认为8MB。较大的事务可以借助于更大的日志缓冲区来避免在事务完成之前将日志缓冲区的数据写入日志文件，以减少I/O操作进而提升系统性能。因此，在有着较大事务的应用场景中，建议为此变量设定一个更大的值



•   滚动日志
    mysql&gt; FLUSH LOGS;


</code></pre>

<p>6、MySQL优化方法有哪些？这些优化方法，成本由低到高是什么顺序？</p>

<p>7、drop,delete与truncate的区别</p>

<p>8、列出常用的硬盘Raid模式，以单盘300G，列出各个Raid模式的最低磁盘要求以及对应的使用空间？</p>

<p>9、IO密集型使用场景和CPU密集型使用场景分别是？</p>

<p>10、生产环境的MySQL采用哪种方式安装最优，为什么？</p>

<p>11、Innodb引擎下，常用的优化参数有哪些，以及列出参数对应的功能？</p>

<p>12、innodb_flush_log_at_trx_commit和sync_binlog如何配置性能最好，如何配置性能最安全？</p>

<p>二、问答题，每题10分，共4道题，一共40分<br/>
1、从哪些方面可以获取数据库需要优化的信息，请详细说明？</p>

<p>2、什么样的字段不适合创建索引？</p>

<p>3、MySQL在程序和架构方面，可以做哪些优化？</p>

<p>4、SQL类军规要掌握哪些？</p>

            </div>
            <div>
                22222
                
                
            </div>
        </article>
    </div>
</div>
  <footer id="footer" class="yue">
    <div class="wrapper">
        <p>Designed and Written by <a href="https://twitter.com/Tisoga">Tisoga</a></p>
    </div>
</footer>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>
3333